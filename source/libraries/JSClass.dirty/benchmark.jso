JS.Benchmark=new JS.Module("Benchmark",{include:JS.Console,N:5,measure:function(a,b,c){var d=[],e,f=[],g=c.test,h=b*JS.Benchmark.N;while(h--)e={},c.setup&&c.setup.call(e),d.push(e);var i=JS.Benchmark.N,j,k;while(i--){h=b,j=(new Date).getTime();while(h--)g.call(d.pop());k=(new Date).getTime(),f.push(k-j)}this.printResult(a,f)},printResult:function(a,b){var c=this.average(b);this.reset(),this.print(" "),this.consoleFormat("bgblack","white"),this.print("BENCHMARK"),this.reset(),this.print(" ["+this.format(c)+"]"),this.consoleFormat("cyan"),this.puts(" "+a),this.reset()},format:function(a){var b=a.value===0?0:100*a.error/a.value;return Math.round(a.value)+"ms +/- "+Math.round(b)+"%"},average:function(a){return{value:this.mean(a),error:this.stddev(a)}},mean:function(a,b){var c=[],b=b||function(a){return a},d=a.length,e=0;while(d--)c.push(b(a[d]));d=c.length;while(d--)e+=c[d];return e/c.length},stddev:function(a){var b=function(a){return a*a};return Math.sqrt(this.mean(a,b)-b(this.mean(a)))}}),JS.Benchmark.extend(JS.Benchmark);