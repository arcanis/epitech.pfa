JS.DOM={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,ENV:this,toggleClass:function(a,b){this.hasClass(a,b)?this.removeClass(a,b):this.addClass(a,b)},hasClass:function(a,b){var c=a.className.split(/\s+/);return JS.indexOf(c,b)>=0},addClass:function(a,b){if(this.hasClass(a,b))return;a.className=a.className+" "+b},removeClass:function(a,b){var c=new RegExp("\\b"+b+"\\b\\s*","g");a.className=a.className.replace(c,"")}},JS.DOM.Builder=new JS.Class("DOM.Builder",{extend:{addElement:function(a){this.define(a,function(){return this.makeElement(a,arguments)}),JS.DOM[a]=function(){return(new JS.DOM.Builder).makeElement(a,arguments)}},addElements:function(a){var b=a.length;while(b--)this.addElement(a[b])}},initialize:function(a){this._1=a},makeElement:function(a,b){var c,d,e;document.createElementNS?c=document.createElementNS("http://www.w3.org/1999/xhtml",a):c=document.createElement(a);for(var f=0,g=b.length;f<g;f++){d=b[f];if(typeof d=="function")d(new this.klass(c));else if(JS.isType(d,"string"))c.appendChild(document.createTextNode(d));else for(e in d)c[e]=d[e]}return this._1&&this._1.appendChild(c),c},concat:function(a){if(!this._1)return;this._1.appendChild(document.createTextNode(a))}}),JS.DOM.Builder.addElements(["a","abbr","address","applet","area","article","aside","audio","b","base","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","command","datalist","dd","del","details","device","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","map","mark","marquee","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","samp","script","section","select","small","source","span","strong","style","sub","sup","summary","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","ul","var","video","wbr"]),JS.DOM.Event={_2:[],on:function(a,b,c,d){if(a!==JS.DOM.ENV&&a.nodeType!==JS.DOM.ELEMENT_NODE&&a.nodeType!==JS.DOM.DOCUMENT_NODE)return;var e=function(){c.call(d,a)};a.addEventListener?a.addEventListener(b,e,!1):a.attachEvent&&a.attachEvent("on"+b,e),this._2.push({_0:a,_3:b,_5:c,_6:d,_4:e})},detach:function(a,b,c,d){var e=this._2.length,f;while(e--){f=this._2[e];if(a&&a!==f._0||b&&b!==f._3||c&&c!==f._5||d&&d!==f._6)continue;f._0.removeEventListener?f._0.removeEventListener(f._3,f._4,!1):f._0.detachEvent&&f._0.detachEvent("on"+f._3,f._4),this._2.splice(e,1),f=null}}},JS.DOM.Event.on(JS.DOM.ENV,"unload",JS.DOM.Event.detach,JS.DOM.Event);