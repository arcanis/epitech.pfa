//!provides:APP.DirtBlock.client
// 
//!requires:APP.Block.Client
//!requires:APP.DirtBlock
//!requires:JS.Singleton

global.APP.DirtBlock.client = new JS.Singleton(APP.Block.Client, {
	initialize: function () {		
		this.callSuper();
		
		this.textures.store('Top greyscale', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAAAJiS0dEAACqjSMyAAAACXBIWXMAAA6mAAAOpgGH3KlvAAAACXZwQWcAAAEAAAABAACyZ9yKAAABL0lEQVQozwXBi27SUAAA0MNteRd5aFVmVDKDmT/qNy7TLMZFIUClG2wMxm09p/G9XmkZiBIvmoJKjcpEIZE+mqtdu9D3G7WZvaHaWstO2hTVPsvcykyd7CxFXTv3MmlQSLA30HVjoOFK4c6VpShUpko8iW5l9o6itoYfpgjB0kelr7ouPPgg2ti59MVSKrQV9ubuLNXmFjra2jpKpVdCbSyz8GAow4uGaCOaCAbS6LWtB7m2nmuZhn/Goo2Zg/DkpzcSI3+RS21NTWw9K+yEpo4/ckeVhZXSN2cHC++0nKRDtbd+GWuqzXTUMnvvdRyk0jNKY4VEcG8rSGzNVE6ehUcDqUKmpZQbCbYu3Sj1jYWzk5UodzCxUGlgLXHUc5DmUkOFtU9WenJ7TTsjZ1Hff6cbgJM2JG+xAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDExLTEwLTIzVDIyOjE5OjI2KzAyOjAwwpdbXAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxMS0wOS0yNVQwMDoyNDoyNiswMjowMLZRsMgAAAAZdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41Ljg3O4BdAAAAAElFTkSuQmCC');
		this.textures.store('Side greyscale', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAAAJiS0dEAACqjSMyAAAACW9GRnMAAABgAAAAIABHWp02AAAACXBIWXMAAA6mAAAOpgGH3KlvAAAACXZwQWcAAAEAAAABAACyZ9yKAAAAiElEQVQoz+3HzYqBYRiA4ev7CfOJkpWsbJyLpaVzmlPU29RYyBDiGSLvrOQEZumqe3EXn7lyd0bHUdfA1clD4epopC5sjdVKa22/zqb6dvYaLQ/1CitDGxelm8rSh9Bz17JRh0YgJBOhUcnCjwahJAkh6QhrfAvJQRK+mGUWeZ5hkV89/+2//AHdNzdH41LUQQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMS0xMC0yM1QyMjoxOToyNiswMjowMMKXW1wAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTEtMDktMjVUMDA6MjQ6MjYrMDI6MDC2UbDIAAAAGXRFWHRTb2Z0d2FyZQBQYWludC5ORVQgdjMuNS44NzuAXQAAAABJRU5ErkJggg==');
		this.textures.store('Side normal', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlvRkZzAAAAMAAAAAAA3lCxYwAAAAlwSFlzAAAOpgAADqYBh9ypbwAAAAl2cEFnAAABAAAAAQAAsmfcigAAArlJREFUOMttyklz2zYAgNEPIEiAO2lJTqd23HGSae/tKT301mOv/fVd45HiRRIlkqLAFf0Dfecnfvnpo8uSCCGhsz2zWyjTlLpuCMMQ3/fZfX0lSyPiOGKeZrTxcc6RxAkyT0KU75EXBZvVhnEYeTscWW/WnM4tX1/23K5zhIAsSdHG4KmAf788M88LyvMDVKD4+58t0zjw/v4burblcKooi5TT+cy1H2maDiff0MpHAmmRcD6fUHVT0w8L8zyxvsmoqxMmDBj7CZ2GlDhOdcOnHz5gLxYhBE9PW7LUULUd4tfP3zvb9xitkZ5gmR0Atu8BiCIDwDI7/u8phCPwfZTvUdctN2WJlJJlWVBKIQQoz2dwPVmaorVmnmeutkMHBpVnBc6NWDtxu9lgjOJcXyiKgmkakdJDiBmlYoxRNO2VaZ7xpCJJUySeJDSasoh5eP8Oay1GK3QgCI0iL3LG0SHlQnVu2axyojjm7u6O6nhERcbQdReiKOb5peJqR9Y3GU74tM0JHTpWqxJP+aTjQNtbVnlMUx8oixh52B8IlGC/3yOV4v7hAWth6DuSJOR2nVPXDVlmCJMUozSvx5rN7R11YxG///bZMQ846TFOE56TGC2xo2OeJvAk2hP0s8NeOpIowteGoe8QUqFGeyEwIbvtnk8f7tnutkxjhO0twzjh+worJUkcUhQ5Tjg6e+Xt7YQOJHKaBLvtG+uy5I8/vxAlGQhJkhcMIwipGIaFp90z4zDSVg3TOBIGHgKBsrajzGP2xwMmjqjPNYGvuJxb5nlEyhAhFzY3a7Q2GO0B8Nf+jJQL8jqMREkKnmNVZKxuVvT9QBJrvnu4ozrWSAQmDKmOFaeqBWC9ztmsV4iff3x0npCkScoyT+xeXvj23QohPapTgwo8xLIwDDOPj/fsXl5JA82l70mimP8ATb1QCFfnXgoAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTEtMTAtMjNUMjI6MTk6MjYrMDI6MDDCl1tcAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDExLTA5LTI1VDAwOjI0OjI2KzAyOjAwtlGwyAAAABl0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuODc7gF0AAAAASUVORK5CYII=');
		this.textures.store('Bottom normal', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGPC/xhBQAAAAZiS0dEAP8A/wD/oL2nkwAAAAlvRkZzAAAAIAAAAAAA3Yaz+AAAAAlwSFlzAAAOpgAADqYBh9ypbwAAAAl2cEFnAAABAAAAAQAAsmfcigAAAs9JREFUOMsl0klv20YAgNGP5HDfJVFKbTexAwcBeuilx577/w89BEiApG3q2pIsUeIy3Gd6yG94z/jtlxttCxthmWjDYJ5mTEPRdSNJErPKE9Qyo7VC2C4Az4c9tvBopUSEvk8SBRgmyH5gcUzyOKaqanzfxzAM9seSJA4Ihc0yL9z9tENrTRTeYKaRj7At0iyjWBdM48TxdGZTbLhcG573r2w3KYYBSRTjeh6WcPj7nxeWRSEs20E4gm9/PTFPIz/fvUE2DadLSZ7FXK5XumGiriXaPOIKGxOIs4jr9YKo6ophVCzLzGaVUJUXPN9hGmbc2CdHc6lqHj++p297DMPg+/cnktijbCRCyoFVnhJEAV0j2ey2eI4gCEM+ff5GEro4vsvlVIPqmZYFwzRJkoyxLBGWsGk7SRB4mAaU5zNNN9FJyf3DLYPsmPqeZpC82W04HU4Uq4TyckEYYBbrhCQImOeBcyUxgDwOCKOAQXboeSEOfHxf8LJ/JQ1cMAyiwKcfNWZdN6hlRi2a7TphUor9a4lSUF4lp7phWkAIGz/0iPOcppWcLi3FOkHc3t4yjANKaYpVyv5Q4rkeaEU/DlTVhEbx7u6GPz99oakkRbFBWB3jOCKenv4ljlL6ceZ4PBHGAWqe8aOQ47nGcV2qquOrfmKVxszLgrAsZq2xLAvTNE2GQdLKFiyLpm6xLIvDscR1BUpr1DIQ+yFZvmK93pJlMeW1Aa0xAeq+x3VMPFewqAXXdbDNhb4bKFYpcRxTVVfGeaKTLZ+/fGW9zjieK0zZTXhC8HD/HlfY2KZNGIYobZGnAbvdjrubWwI/ZB4mXg6vrNKQx8cHtusU44/fP+o0y2iuFffv3qIU7F/31HVPscn57/nwI5PrYlk2rm2jUDRNg+d6GL9+KHSWJD9sw4hTeWKVxozzRNsOJHlG31QsyuTt3Y5OjizThBs4YFn8DzJXbFYpqSLWAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDExLTEwLTIzVDIyOjE5OjI2KzAyOjAwwpdbXAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxMS0wOS0yNVQwMDoyNDoyNiswMjowMLZRsMgAAAAZdEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41Ljg3O4BdAAAAAElFTkSuQmCC');
	},
	
	update: function () {
		var topGreyscale = new THREE.MeshBasicMaterial({ color: 0x5c6242, map: THREE.ImageUtils.loadTexture(this.textures.get('Top greyscale')) });
		var sideGreyscale = new THREE.MeshBasicMaterial({ color: 0x5c6242, map: THREE.ImageUtils.loadTexture(this.textures.get('Side greyscale')) });
		var sideImage = new THREE.MeshBasicMaterial({ map: THREE.ImageUtils.loadTexture(this.textures.get('Side normal')) });
		var bottomImage = new THREE.MeshBasicMaterial({ map: THREE.ImageUtils.loadTexture(this.textures.get('Bottom normal')) });
		
		var top = topGreyscale;
		var sides = [ sideImage, sideGreyscale ];
		var bottom = bottomImage;
		
		this.materials = [
			sides,
			sides,
			top,
			bottom,
			sides,
			sides
		];
	}
});
